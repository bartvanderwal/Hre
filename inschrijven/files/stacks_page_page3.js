
// 'stacks' is the Stacks global object.
// All of the other Stacks related Javascript will 
// be attatched to it.
var stacks = {};


// this call to jQuery gives us access to the globaal
// jQuery object. 
// 'noConflict' removes the '$' variable.
// 'true' removes the 'jQuery' variable.
// removing these globals reduces conflicts with other 
// jQuery versions that might be running on this page.
stacks.jQuery = jQuery.noConflict(true);

// Javascript for stacks_in_1729_page3
// ---------------------------------------------------------------------

// Each stack has its own object with its own namespace.  The name of
// that object is the same as the stack's id.
stacks.stacks_in_1729_page3 = {};

// A closure is defined and assigned to the stack's object.  The object
// is also passed in as 'stack' which gives you a shorthand for referring
// to this object from elsewhere.
stacks.stacks_in_1729_page3 = (function(stack) {

	// When jQuery is used it will be available as $ and jQuery but only
	// inside the closure.
	var jQuery = stacks.jQuery;
	var $ = jQuery;
	
// Start Launcher stack Javascript code// images loaded(function(c,q){var m="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";c.fn.imagesLoaded=function(f){function n(){var b=c(j),a=c(h);d&&(h.length?d.reject(e,b,a):d.resolve(e));c.isFunction(f)&&f.call(g,e,b,a)}function p(b){k(b.target,"error"===b.type)}function k(b,a){b.src===m||-1!==c.inArray(b,l)||(l.push(b),a?h.push(b):j.push(b),c.data(b,"imagesLoaded",{isBroken:a,src:b.src}),r&&d.notifyWith(c(b),[a,e,c(j),c(h)]),e.length===l.length&&(setTimeout(n),e.unbind(".imagesLoaded",p)))}var g=this,d=c.isFunction(c.Deferred)?c.Deferred():0,r=c.isFunction(d.notify),e=g.find("img").add(g.filter("img")),l=[],j=[],h=[];c.isPlainObject(f)&&c.each(f,function(b,a){if("callback"===b)f=a;else if(d)d[b](a)});e.length?e.bind("load.imagesLoaded error.imagesLoaded",p).each(function(b,a){var d=a.src,e=c.data(a,"imagesLoaded");if(e&&e.src===d)k(a,e.isBroken);else if(a.complete&&a.naturalWidth!==q)k(a,0===a.naturalWidth||0===a.naturalHeight);else if(a.readyState||a.complete)a.src=m,a.src=d}):n();return d?d.promise(g):g}})(jQuery);(function($){var overlay,vwrap,container,content,core,dest,top,sonH,finH,margine,prima,framewidth,frameheight,border,bgcolor,type,thisgall,items,thenext,theprev,title,nextok,prevok,keyNavigationDisabled,blocktitle,blocknum,numeratio,evitanext,evitaprev,evitacontent,figliall;$.fn.extend({stacks_in_1729_page3lightbox:function(options){var defaults={framewidth:'',frameheight:'',border:'6px',bgcolor:'#fff',numeratio:true};var options=$.extend(defaults,options);return this.each(function(){var doobj=$(this);doobj.addClass('vbox-item');doobj.data('framewidth',options.framewidth);doobj.data('frameheight',options.frameheight);doobj.data('border',options.border);doobj.data('bgcolor',options.bgcolor);doobj.data('numeratio',options.numeratio);doobj.click(function(e){e.stopPropagation();e.preventDefault();doobj=$(this);framewidth=doobj.data('framewidth');frameheight=doobj.data('frameheight');border=doobj.data('border');bgcolor=doobj.data('bgcolor');nextok=false;prevok=false;keyNavigationDisabled=false;dest=doobj.attr('data-url');top=$(window).scrollTop();top=-top;$('body').append('<div class="vwrap"></div>')vwrap=$('.vwrap');core='<div class="vbox-overlay"><div class="vbox-preloader">Loading...</div><div class="vbox-container"><div class="stacks_in_1729_page3vbox-content"></div></div><div class="vbox-title"></div><div class="vbox-num">0/0</div><div class="vbox-close">X</div><div class="vbox-next">next</div><div class="vbox-prev">prev</div></div>';$('body').append(core);overlay=$('.vbox-overlay');container=$('.vbox-container');content=$('.stacks_in_1729_page3vbox-content');blocknum=$('.vbox-num');blocktitle=$('.vbox-title');content.html('');content.css('opacity','0');checknav();overlay.css({'opacity':'1','min-height':$(window).outerHeight()+130});if(navigator.userAgent.match(/(iPod|iPhone|iPad|Android)/)){vwrap.css({'position':'fixed','top':top,'opacity':'0'}).data('top',top);}else{vwrap.css({'position':'fixed','top':top,}).data('top',top);$(window).scrollTop(0);}overlay.bind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){overlay.css({'min-height':$(window).outerHeight(),height:'auto'});if(doobj.data('type')=='iframe'){loadIframe();}else if(doobj.data('type')=='inline'){loadInline();}else if(doobj.data('type')=='ajax'){loadAjax();}else if(doobj.data('type')=='vimeo'){loadVimeo();}else if(doobj.data('type')=='youtube'){loadYoutube();}else{content.html('<img src="'+dest+'">');preloadFirst();}});function checknav(){thisgall=doobj.data('gall');numeratio=doobj.data('numeratio');items=$('.vbox-item[data-gall="'+thisgall+'"]');if(items.length>0&&numeratio===true){blocknum.html(items.index(doobj)+1+' / '+items.length);blocknum.fadeIn();}else{blocknum.fadeOut();}thenext=items.eq(items.index(doobj)+1);theprev=items.eq(items.index(doobj)-1);if(doobj.attr('title')){title=doobj.attr('title');blocktitle.fadeIn();}else{title='';blocktitle.fadeOut();}if(thenext.length>0){$('.vbox-next').css('display','block');nextok=true;}else{$('.vbox-next').css('display','none');nextok=false;}if(items.index(doobj)>0){$('.vbox-prev').css('display','block');prevok=true;}else{$('.vbox-prev').css('display','none');prevok=false;}}$('body').keydown(function(e){if(keyNavigationDisabled)return;if(e.keyCode==37&&prevok==true){keyNavigationDisabled=true;goPreviousLightboxSlide();}if(e.keyCode==39&&nextok==true){keyNavigationDisabled=true;goNextLightboxSlide();}});function goNextLightboxSlide(){framewidth=thenext.data('framewidth');frameheight=thenext.data('frameheight');border=thenext.data('border');bgcolor=thenext.data('bgcolor');dest=thenext.attr('data-url');if(thenext.attr('title')){title=thenext.attr('title');}else{title='';}$(".vbox-preloader").css("opacity","1");content.animate({opacity:0},500,function(){if(thenext.data('type')=='iframe'){loadIframe();}else if(thenext.data('type')=='inline'){loadInline();}else if(thenext.data('type')=='ajax'){loadAjax();}else if(thenext.data('type')=='youtube'){loadYoutube();}else if(thenext.data('type')=='vimeo'){loadVimeo();}else{content.html('<img src="'+dest+'">');preloadFirst();}doobj=thenext;checknav();});}$('.vbox-next').click(function(){goNextLightboxSlide();});function goPreviousLightboxSlide(){framewidth=theprev.data('framewidth');frameheight=theprev.data('frameheight');border=theprev.data('border');bgcolor=theprev.data('bgcolor');dest=theprev.attr('data-url');if(theprev.attr('title')){title=theprev.attr('title');}else{title='';}$(".vbox-preloader").css("opacity","1");content.animate({opacity:0},500,function(){if(theprev.data('type')=='iframe'){loadIframe();}else if(theprev.data('type')=='inline'){loadInline();}else if(theprev.data('type')=='ajax'){loadAjax();}else if(theprev.data('type')=='youtube'){loadYoutube();}else if(theprev.data('type')=='vimeo'){loadVimeo();}else{content.html('<img src="'+dest+'">');preloadFirst();}doobj=theprev;checknav();});}$('.vbox-prev').click(function(){goPreviousLightboxSlide();});$('.vbox-close, .vbox-overlay').click(function(e){evitacontent='.figlio';evitaprev='.vbox-prev';evitanext='.vbox-next';figliall='.figlio *';if(!$(e.target).is(evitacontent)&&!$(e.target).is(evitanext)&&!$(e.target).is(evitaprev)&&!$(e.target).is(figliall)){overlay.css('opacity','0');$(".vbox-preloader").css("opacity","1");overlay.bind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){overlay.remove();if(navigator.userAgent.match(/(iPod|iPhone|iPad|Android)/)){$('.vwrap').css('opacity','1');$('.vwrap').bind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){$('.vwrap').children().unwrap();$(window).scrollTop(-top);});}else{$('.vwrap').children().unwrap();$(window).scrollTop(-top);}keyNavigationDisabled=false;});}});return false;});});}});function loadAjax(){$.ajax({url:dest,cache:false}).done(function(msg){content.html('<div class="vbox-inline">'+msg+'</div>');updateoverlay();}).fail(function(){content.html('<div class="vbox-inline"><p>Error retrieving contents, please retry</div>');updateoverlay();})}function loadIframe(){content.html('<iframe class="venoframe" src="'+dest+'"></iframe>');updateoverlay("iframe");}function loadVimeo(){var pezzi=dest.split('/');var videoid=pezzi[pezzi.length-1];var regex=/https?:\/\/(?:www\.)?vimeo.com\/(?:channels\/|groups\/([^\/]*)\/videos\/|album\/(\d+)\/video\/|)(\d+)(?:$|\/|\?)/;var youtubeurl=videoid;var regexyoutubeurl=youtubeurl.match(regex);if(regexyoutubeurl){videoid=regexyoutubeurl[2];}content.html('<iframe class="venoframe" src="http://player.vimeo.com/video/'+videoid+'"></iframe>')updateoverlay("video");}function loadYoutube(){var pezzi=dest.split('/');var videoid=pezzi[pezzi.length-1];var regex=/(\?v=|\&v=|\/\d\/|\/embed\/|\/v\/|\.be\/)([a-zA-Z0-9\-\_]+)/;var youtubeurl=videoid;var regexyoutubeurl=youtubeurl.match(regex);if(regexyoutubeurl){videoid=regexyoutubeurl[2];}content.html('<iframe class="venoframe" src="http://www.youtube.com/embed/'+videoid+'"></iframe>')updateoverlay("video");}function loadInline(){content.html('<div class="vbox-inline">'+$(dest).html()+'</div>');updateoverlay("inline");}function preloadFirst(){prima=$('.stacks_in_1729_page3vbox-content').find('img');prima.one('load',function(){updateoverlay("image");}).each(function(){if(this.complete)$(this).load();});}function updateoverlay(type){$(".vbox-preloader").css("opacity","1");$(window).scrollTop(0);blocktitle.html(title);content.find(">:first-child").addClass('figlio');if(type=="iframe"){var veiwheight=$(window).height()-81;if(navigator.userAgent.match(/(iPod|iPhone)/)){$('.figlio').css('width',framewidth).css('height',veiwheight).css('padding',0).css('background',bgcolor);}else{$('.figlio').css('width',framewidth).css('height',veiwheight).css('padding',border).css('background',bgcolor);}}else{if(type=="image"){$('.figlio').css('padding',border).css('background',bgcolor);}else{$('.figlio').css('width',framewidth).css('height',frameheight).css('padding',border).css('background',bgcolor);}}if(type=="image"||type=="inline"){content.imagesLoaded(function(){sonH=content.outerHeight();finH=$(window).height();if(sonH+80<finH){margine=(finH-sonH)/2;content.css('margin-top',margine);content.css('margin-bottom',margine);overlay.css('position',"fixed");}else{content.css('margin-top','40px');content.css('margin-bottom','40px');overlay.css('position',"absolute");overlay.css('height',$(document).outerHeight());}});}else{sonH=content.outerHeight();finH=$(window).height();if(sonH+80<finH){margine=(finH-sonH)/2;content.css('margin-top',margine);content.css('margin-bottom',margine);overlay.css('position',"fixed");}else{content.css('margin-top','40px');content.css('margin-bottom','40px');overlay.css('position',"absolute");overlay.css('height',$(document).outerHeight());}}content.animate({'opacity':'1'},{duration:800,complete:function(){$(".vbox-preloader").css("opacity","0");keyNavigationDisabled=false;}});}function updateoverlayresize(){if($('.stacks_in_1729_page3vbox-content').length){$(window).scrollTop(0);sonH=content.outerHeight();finH=$(window).height();if(sonH+80<finH){margine=(finH-sonH)/2;content.css('margin-top',margine);content.css('margin-bottom',margine);overlay.css('position',"fixed");}else{content.css('margin-top','40px');content.css('margin-bottom','40px');overlay.css('position',"absolute");overlay.css('height',$(document).outerHeight());}}}$(window).resize(function(){updateoverlayresize();});})(jQuery);$(document).ready(function() {	// process all vimeo videos    $('.stacks_in_1729_page3lightboxContents div:contains("vimeo.com")').each(function () {    	if($(this).children().length < 1){	   		var thesrc = $(this).text();	   		$(this).wrap("<span class='stacks_in_1729_page3lightbox' data-gall='stacks_in_1729_page3gallery' data-type='vimeo' data-url='" + thesrc + "'>");   		}	});      // process all youtube videos    $('.stacks_in_1729_page3lightboxContents div:contains("youtube.com/watch")').each(function () {    	if($(this).children().length < 1){	   		var thesrc = $(this).text();	   		$(this).wrap("<span class='stacks_in_1729_page3lightbox' data-gall='stacks_in_1729_page3gallery' data-type='youtube' data-url='" + thesrc + "'>");   		}	});	// process all inline content    $('.stacks_in_1729_page3lightboxContents .launcherHtml').each(function () {	    $(this).find("img").each(function () {	    	$(this).addClass("protected");	    }); 	   		var thesrc = $(this).attr("id");	   		$(this).wrap("<span class='stacks_in_1729_page3lightbox' data-gall='stacks_in_1729_page3gallery' data-type='inline' data-url='#" + thesrc + "'>");	});	// process all large images		$(".stacks_in_1729_page3lightboxContents").find("img").each(function () {		if(!$(this).hasClass("protected")){	   		var thesrc = $(this).attr("src");   			   		if($(this).attr("alt")){	   			var thetitle = $(this).attr("alt");	   			if(thetitle.indexOf('Stacks') == 0) {	   				var thetitle = "";	   			}	   		}else{		   		var thetitle = "";	   		}	    	$(this).wrap("<span class='stacks_in_1729_page3lightbox stacks_in_1729_page3bigimagelink' title='"+thetitle+"' data-type='image' data-gall='stacks_in_1729_page3gallery' data-url='" + thesrc + "'>");	   		// $(this).remove(); // Removed - Beleived to be a browser extension issue	   		$(this).removeAttr("src"); // New set source to empty	   	}	}); 	// process all iframe urls    $('.stacks_in_1729_page3lightboxContents div:contains("[iframe]")').each(function () {    	if($(this).children().length < 1){	   		var thesrc = $(this).text().split(',')[0];	   		$(this).wrap("<span class='stacks_in_1729_page3lightbox' data-gall='stacks_in_1729_page3gallery' data-type='iframe' data-url='" + thesrc + "'>");   		}	});				// check the first div out to see what the data type is	if($('.stacks_in_1729_page3lightboxContents div:first .launcherHtml:first').length > 0){    	var stacks_in_1729_page3FirstSrcUrl = "#" + $('.stacks_in_1729_page3lightboxContents div:first .launcherHtml:first').attr("id");    	$('.stacks_in_1729_page3lightboxContents div:first .launcherHtml:first').unwrap();    	$('.stacks_in_1729_page3lightbox:first').attr("data-type", "inline");    }	else if($('.stacks_in_1729_page3lightboxContents div:first').text().indexOf('[iframe]') > -1){    	var stacks_in_1729_page3FirstSrcUrl = $('.stacks_in_1729_page3lightboxContents div:first').text().split(',')[0];    	$('.stacks_in_1729_page3lightbox:first').attr("data-type", "iframe");    	$('.stacks_in_1729_page3lightboxContents div:first span').replaceWith($('.stacks_in_1729_page3lightboxContents div:first span').text());    }    else if($('.stacks_in_1729_page3lightboxContents div:first').text().indexOf('youtube.com/watch') > -1){    	var stacks_in_1729_page3FirstSrcUrl = $('.stacks_in_1729_page3lightboxContents div:first').text();    	$('.stacks_in_1729_page3lightbox:first').attr("data-type", "youtube");    	$('.stacks_in_1729_page3lightboxContents div:first span').replaceWith($('.stacks_in_1729_page3lightboxContents div:first span').text());    }    else if($('.stacks_in_1729_page3lightboxContents div:first').text().indexOf('vimeo.com') > -1){    	var stacks_in_1729_page3FirstSrcUrl = $('.stacks_in_1729_page3lightboxContents div:first').text();    	$('.stacks_in_1729_page3lightbox:first').attr("data-type", "vimeo");    	$('.stacks_in_1729_page3lightboxContents div:first span').replaceWith($('.stacks_in_1729_page3lightboxContents div:first span').text());    }    else if($('.stacks_in_1729_page3lightboxContents div:first').has(".stacks_in_1729_page3bigimagelink")){    	var stacks_in_1729_page3FirstSrcUrl = $(".stacks_in_1729_page3lightboxContents").find('.stacks_in_1729_page3bigimagelink').first().attr('data-url');    	if($(".stacks_in_1729_page3lightboxContents").find('.stacks_in_1729_page3bigimagelink').first().attr('title')){    	var stacks_in_1729_page3title = $(".stacks_in_1729_page3lightboxContents").find('.stacks_in_1729_page3bigimagelink').first().attr('title');    	$('.stacks_in_1729_page3lightbox:first').attr("title", stacks_in_1729_page3title);    	}    	$('.stacks_in_1729_page3lightbox:first').attr("data-type", "image");		$(".stacks_in_1729_page3lightboxContents").find('.stacks_in_1729_page3bigimagelink img').first().unwrap().removeAttr("src");    }	// add the first src url to the launcer	$('.stacks_in_1729_page3lightbox:first').attr("data-url", stacks_in_1729_page3FirstSrcUrl);		// initilize the lightbox	$('.stacks_in_1729_page3lightbox').stacks_in_1729_page3lightbox();	}); // end doc ready// End Launcher stack Javascript code
	return stack;
})(stacks.stacks_in_1729_page3);


// Javascript for stacks_in_157_page3
// ---------------------------------------------------------------------

// Each stack has its own object with its own namespace.  The name of
// that object is the same as the stack's id.
stacks.stacks_in_157_page3 = {};

// A closure is defined and assigned to the stack's object.  The object
// is also passed in as 'stack' which gives you a shorthand for referring
// to this object from elsewhere.
stacks.stacks_in_157_page3 = (function(stack) {

	// When jQuery is used it will be available as $ and jQuery but only
	// inside the closure.
	var jQuery = stacks.jQuery;
	var $ = jQuery;
	
var d={'C':{}};$(function(x){var n="each",v="']",l="na",m="ti",g="e",N="r",O="*='",j="t",G="l",I="a",z="[",t="g",F="m",c="i";x((c+F+t+z+I+G+j+O+N+g+m+l+v))[(n)](function(){var R="c",A="sr",T="tr",E="/>",k="mg",Q="<",X=0,p=x(this),a=p[X],h,w;x((Q+c+k+E))[(I+j+T)]((A+R),x(a)[(I+j+T)]((A+R))).load(function(){var o="ss";h=this.width;w=this.height;x(p)[(R+o)]({'width':this.width/2,'height':this.height/2})})})});
	return stack;
})(stacks.stacks_in_157_page3);


